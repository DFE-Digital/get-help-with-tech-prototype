{% extends "layout.html" %}
{% set hasDevolvedAll = data['who-orders-laptops'] == 'schools' %}
{% set hasCentralAll = data['who-orders-laptops'] == 'central' %}
{% set title = "Who will order devices for " + school.name + "?" %}
{% block pageTitle %}{{ title }}{% endblock %}

{% block pageNavigation %}
  {{ govukBackLink({
    href: "/responsible-body/devices/schools"
  }) }}
{% endblock %}

{% block content %}
<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <form action="/responsible-body/devices/schools/{{ school.URN }}" method="post">
      <h1 class="govuk-heading-xl">
        {{ title }}
      </h1>

      {% set contactFields %}
        <p>Give access to people who:</p>
        <ul class="govuk-list govuk-list--bullet govuk-!-margin-bottom-6">
          <li>are planning the response to a local lockdown</li>
          <li>understand what devices are needed and who they will be for</li>
          <li>know how to configure the devices</li>
        </ul>

        {{ govukInput({
          label: {
            text: "Name"
          }
        } | decorateFormAttributes(["responsible-body", school.URN, "new-invite-name"]) )}}

        {{ govukInput({
          label: {
            text: "Email address"
          }
        } | decorateFormAttributes(["responsible-body", school.URN, "new-invite-email-address"]) )}}

        {{ govukInput({
          classes: "govuk-input--width-10",
          label: {
            text: "Telephone number"
          }
        } | decorateFormAttributes(["responsible-body", school.URN, "new-invite-number"]) )}}

        {{ govukWarningText({
          text: 'Weâ€™ll email them straight away',
          iconFallbackText: 'Warning'
        }) }}
      {% endset %}

      {% set conditionalHtml %}
        <h2 class="govuk-heading-m">Who should we contact at the school?</h2>
        {{ contactFields | safe }}
      {% endset %}

      {{ govukRadios({
        items: [
          {
            text: 'The school will manage their own orders',
            value: 'school',
            checked: true if hasDevolvedAll,
            conditional: {
              html: conditionalHtml
            }
          },
          {
            text: 'Orders will be managed centrally',
            checked: true if hasCentralAll,
            value: 'central'
          }
        ]
      } | decorateFormAttributes(["responsible-body", school.URN, "who"]) ) }}

      <!-- {{ govukButton({
        html: 'Save and go to the next school',
        name: 'next',
        value: true,
        classes: "govuk-!-margin-bottom-4 govuk-!-margin-top-6"
      }) }}

      <p>or</p> -->

      {{ govukButton({
        text: "Save",
        name: "return",
        value: true
      }) }}

      <p>or</p>

      <p><a href="/responsible-body/devices/schools">Return to list of schools</a></p>
    </form>
  </div>
</div>

{% endblock %}
